<?php 
    $page = "announcement";
    include("header.html");
    $events = getEvents($connection, NULL, $adminType, $adminData['barangay']);
    if (!isset($_SESSION['admin-data'])) {
        header("location: ../login/admin.html");
        exit();
    }
?>
    <?php if($adminData['admin_type'] == "Main Administrator") { ?>
    <div class="container-fluid">
        <div class="row">
            <div class="col">
                <h3 class="text-dark mb-4">Events</h3>
            </div>
            <div class="col"><a class="float-end btn btn-primary" href="create-announcement.html">Add Event</a></div>
        </div>
        <div class="card shadow">
            <div class="card-header py-3">
                <p class="text-primary m-0 fw-bold">List of Events</p>
            </div>
            <div class="card-body">
                <div class="table-responsive table mt-2" id="dataTable-1" role="grid" aria-describedby="dataTable_info">
                    <table class="table my-0" id="announcements">
                        <thead>
                            <tr>
                                <th style="text-align: center;">Event Title</th>
                                <th style="text-align: center;">Date</th>
                                <th style="text-align: center;">Event Message</th>
                                <th style="text-align: center;">Event For</th>
                                <th style="text-align: center;">Event Address</th>
                                <th style="text-align: center;">Show Information</th>
                                <th style="text-align: center;">Edit</th>
                                <th style="text-align: center;">Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            <?php foreach($announcements as $announcement): ?>
                            <tr>
                                <td style="text-align: center;"><?php echo($announcement['TITLE']) ?></td>
                                <td style="text-align: center;"><?php echo($announcement['DATE']) ?></td>
                                <td style="text-align: center;"><?php echo($announcement['MESSAGE']) ?></td>
                                <td style="text-align: center;"><?php echo($announcement['ANNOUNCEMENT_FOR']) ?></td>
                                <td style="text-align: center;">Barangay <?php echo($announcement['BARANGAY']) ?>&nbsp;</td>
                                <td style="text-align: center;"><a class="btn btn-primary" href="event.html?id=<?php echo($announcement['ANNOUNCEMENT_ID']) ?>">Show Information</a></td>
                                <td style="text-align: center;"><a class="btn btn-primary" href="update-announcement.html?edit=<?php echo($announcement['ANNOUNCEMENT_ID']) ?>">Edit</a></td>
                                <td style="text-align: center;"><a class="btn btn-danger" id="deleteAnnouncement" href="includes/delete-announcement.inc.php?delete=<?php echo($announcement['ANNOUNCEMENT_ID']) ?>">Delete</a></td>
                            </tr>
                            <?php endforeach; ?>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <?php } else { ?>
    <div class="container-fluid">
        <div class="row">
            <div class="col">
                <h3 class="text-dark mb-4">Events</h3>
            </div>
            <div class="col"><a class="float-end btn btn-primary" href="create-announcement.html">Add Event</a></div>
        </div>
        <div class="card shadow">
            <div class="card-header py-3">
                <p class="text-primary m-0 fw-bold">List of Events</p>
            </div>
            <div class="card-body">
                <div class="table-responsive table mt-2" id="dataTable-1" role="grid" aria-describedby="dataTable_info">
                    <table class="table my-0" id="announcements">
                        <thead>
                            <tr>
                                <th style="text-align: center;">Event Title</th>
                                <th style="text-align: center;">Date</th>
                                <th style="text-align: center;">Event Message</th>
                                <th style="text-align: center;">Event For</th>
                                <th style="text-align: center;">Event Address</th>
                                <th style="text-align: center;">Show Information</th>
                                <th style="text-align: center;">Edit</th>
                                <th style="text-align: center;">Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            <?php foreach($events as $announcement): ?>
                            <tr>
                                <td style="text-align: center;"><?php echo($announcement['TITLE']) ?></td>
                                <td style="text-align: center;"><?php echo($announcement['DATE']) ?></td>
                                <td style="text-align: center;"><?php echo($announcement['MESSAGE']) ?></td>
                                <td style="text-align: center;"><?php echo($announcement['ANNOUNCEMENT_FOR']) ?></td>
                                <td style="text-align: center;">Barangay <?php echo($announcement['BARANGAY']) ?>&nbsp;</td>
                                <td style="text-align: center;"><a class="btn btn-primary" href="event.html?id=<?php echo($announcement['ANNOUNCEMENT_ID']) ?>">Show Information</a></td>
                                <td style="text-align: center;"><a class="btn btn-primary" href="update-announcement.html?edit=<?php echo($announcement['ANNOUNCEMENT_ID']) ?>">Edit</a></td>
                                <td style="text-align: center;"><a class="btn btn-danger" id="deleteAnnouncement" href="includes/delete-announcement.inc.php?delete=<?php echo($announcement['ANNOUNCEMENT_ID']) ?>">Delete</a></td>
                            </tr>
                            <?php endforeach; ?>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <?php } ?>
<?php
    include "footer.html";
?>