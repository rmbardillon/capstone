<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Admin Add Administrator</title>
    <link rel="shortcut icon" href="assets/img/icons/santarosa-logo.ico" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script defer type="text/javascript" src="assets/js/function.js"></script>
    <link rel="stylesheet" href="assets/bootstrap/css/style.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&amp;display=swap">
    <link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
</head>

<body id="page-top">
    <div id="wrapper">
        <div class="container" style="background: #ffffff;">
            <div class="card shadow-lg o-hidden border-0 my-5">
                <div class="card-body p-0">
                    <div class="row">
                        <div class="col-lg-5 d-none d-lg-flex">
                            <div class="flex-grow-1 bg-register-image" style="background: url(assets/img/background/cswd.png) center / auto no-repeat;"></div>
                        </div>
                        <div class="col-lg-7">
                            <div class="p-5">
                                <div class="text-center">
                                    <h4 class="text-dark mb-4">Add Administrator</h4>
                                </div>
                                <form class="user" action="includes/add-administrator.inc.php" method="post">
                                    <div class="row mb-3">
                                        <div class="col-sm-6 mb-3 mb-sm-0">
                                            <input class="form-control form-control-user name" type="text" id="first_name" placeholder="First Name" name="first_name" maxlength="64" required>
                                        </div>
                                        <div class="col-sm-6">
                                            <input class="form-control form-control-user name" type="text" id="first_name" placeholder="Last Name" name="last_name" maxlength="64" required>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <input class="form-control form-control-user" type="email" id="email" aria-describedby="emailHelp" placeholder="Email Address" name="email" required>
                                    </div>
                                    <div class="mb-3">
                                        <select class="form-select" id="admin-type" name="admin-type" style="border-radius: 160px;" required>
                                            <option disabled selected value="">Please Select Type of Administrator</option>
                                            <option value="Main Administrator">Main Administrator</option>
                                            <option value="Solo Parent Administrator">Solo Parent Administrator</option>
                                            <option value="Senior Citizen Administrator">Senior Citizen Administrator</option>
                                            <option value="PWD Administrator">PWD Administrator</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <select class="form-select" id="barangay" name="barangay" style="border-radius: 160px;" required>
                                            <option disabled selected value="">Please Select Barangay</option>
                                            <option value="City Hall">City Hall</option>
                                            <option value="Aplaya">Aplaya</option>
                                            <option value="Balibago">Balibago</option>
                                            <option value="Caingin">Caingin</option>
                                            <option value="Dila">Dila</option>
                                            <option value="Dita">Dita</option>
                                            <option value="Don Jose">Don Jose</option>
                                            <option value="Ibaba">Ibaba</option>
                                            <option value="Kalnuran">Kanluran</option>
                                            <option value="Labas">Labas</option>
                                            <option value="Macabling">Macabling</option>
                                            <option value="Malitlit">Malitlit</option>
                                            <option value="Malusak">Malusak</option>
                                            <option value="Market Area">Market Area</option>
                                            <option value="Pook">Pook</option>
                                            <option value="Pulong Santa Cruz">Pulong Santa Cruz</option>
                                            <option value="Santo Domingo">Santo Domingo</option>
                                            <option value="Sinalhan">Sinalhan</option>
                                            <option value="Tagapo">Tagapo</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                    <label for="security_question">Security Question 1</label>
                                    <select class="form-select" id="security_question" name="security_question1" style="border-radius: 160px;" required>
                                        <option value="" disabled selected>-- Select a security question --</option>
                                        <option value="childhood_nickname">What was your childhood nickname?</option>
                                        <option value="favorite_teacher">What is the name of your favorite teacher?</option>
                                        <option value="mother_maiden_name">What is your mother's maiden name?</option>
                                        <option value="city_of_birth">What is the name of the city where you were born?</option>
                                        <option value="first_pet">What is the name of your first pet?</option>
                                        <option value="favorite_book">What is your favorite book?</option>
                                        <option value="favorite_color">What is your favorite color?</option>
                                        <option value="favorite_movie">What is the name of your favorite movie?</option>
                                        <option value="favorite_food">What is your favorite food?</option>
                                        <option value="first_car">What was the make and model of your first car?</option>
                                    </select>
                                    <input class="form-control mt-1" type="text" name="securityAnswer1" id="securityAnswer1" placeholder="Answer to Security Question 1" style="border-radius: 160px;" required>
                                </div>
                                <div class="mb-3">
                                    <label for="security_question">Security Question 2</label>
                                    <select class="form-select" id="security_question" name="security_question2" style="border-radius: 160px;" required>
                                        <option value="" disabled selected>-- Select a security question --</option>
                                        <option value="childhood_nickname">What was your childhood nickname?</option>
                                        <option value="favorite_teacher">What is the name of your favorite teacher?</option>
                                        <option value="mother_maiden_name">What is your mother's maiden name?</option>
                                        <option value="city_of_birth">What is the name of the city where you were born?</option>
                                        <option value="first_pet">What is the name of your first pet?</option>
                                        <option value="favorite_book">What is your favorite book?</option>
                                        <option value="favorite_color">What is your favorite color?</option>
                                        <option value="favorite_movie">What is the name of your favorite movie?</option>
                                        <option value="favorite_food">What is your favorite food?</option>
                                        <option value="first_car">What was the make and model of your first car?</option>
                                    </select>
                                    <input class="form-control mt-1" type="text" name="securityAnswer2" id="securityAnswer2" placeholder="Answer to Security Question 2" style="border-radius: 160px;" required>
                                </div>
                                <div class="mb-3">
                                    <label for="security_question">Security Question 3</label>
                                    <select class="form-select" id="security_question" name="security_question3" style="border-radius: 160px;" required>
                                        <option value="" disabled selected>-- Select a security question --</option>
                                        <option value="childhood_nickname">What was your childhood nickname?</option>
                                        <option value="favorite_teacher">What is the name of your favorite teacher?</option>
                                        <option value="mother_maiden_name">What is your mother's maiden name?</option>
                                        <option value="city_of_birth">What is the name of the city where you were born?</option>
                                        <option value="first_pet">What is the name of your first pet?</option>
                                        <option value="favorite_book">What is your favorite book?</option>
                                        <option value="favorite_color">What is your favorite color?</option>
                                        <option value="favorite_movie">What is the name of your favorite movie?</option>
                                        <option value="favorite_food">What is your favorite food?</option>
                                        <option value="first_car">What was the make and model of your first car?</option>
                                    </select>
                                    <input class="form-control mt-1" type="text" name="securityAnswer3" id="securityAnswer3" placeholder="Answer to Security Question 3" style="border-radius: 160px;" required>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                        <input class="form-control form-control-user password" type="password" id="password" placeholder="Password" name="password" required>
                                    </div>
                                    <div class="col-sm-6">
                                        <input class="form-control form-control-user" type="password" id="repeat_password" placeholder="Confirm Password" name="repeat_password" required>
                                    </div>
                                    <div id="error-message" class='text-danger'></div>
                                    <a class="toggle-password">Show Password</a>
                                </div>
                                <button class="btn btn-primary d-block btn-user w-100" type="submit" name="add_admin">Add Administrator Account</button>
                                    <hr>
                                    <hr>
                                </form>
                                <?php
                                    if (isset($_GET["username"])) {
                                        $username = $_GET['username'];
                                        echo "<div class='alert alert-success d-flex align-items-center alert-dismissible fade show' role='alert'>
                                                <svg class='bi flex-shrink-0 me-2' width='24' height='24' role='img' aria-label='Success:'><use xlink:href='#check-circle-fill'/></svg>
                                                <div>
                                                    Account Successfully Created. <br> Username: $username
                                                </div>
                                                <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
                                                </div>";
                                    }
                                    if (isset($_GET["error"])) {
                                        if ($_GET["error"] == "userexists"){
                                        echo "<div class='alert alert-danger d-flex align-items-center alert-dismissible fade show' role='alert'>
                                                <svg class='bi flex-shrink-0 me-2' width='24' height='24' role='img' aria-label='Danger:'><use xlink:href='#exclamation-triangle-fill'/></svg>
                                                <div>
                                                    User Already Existing.
                                                </div>
                                                <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
                                                </div>";
                                        }
                                        else if ($_GET["error"] == "invalidemail"){
                                        echo "<div class='alert alert-danger d-flex align-items-center alert-dismissible fade show' role='alert'>
                                                <svg class='bi flex-shrink-0 me-2' width='24' height='24' role='img' aria-label='Danger:'><use xlink:href='#exclamation-triangle-fill'/></svg>
                                                <div>
                                                    Invalid Email.
                                                </div>
                                                <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
                                                </div>";
                                        }
                                        else if ($_GET["error"] == "emailtaken"){
                                        echo "<div class='alert alert-danger d-flex align-items-center alert-dismissible fade show' role='alert'>
                                                <svg class='bi flex-shrink-0 me-2' width='24' height='24' role='img' aria-label='Danger:'><use xlink:href='#exclamation-triangle-fill'/></svg>
                                                <div>
                                                    Email already Taken.
                                                </div>
                                                <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
                                                </div>";
                                        }
                                        else if ($_GET["error"] == "passwordnotmatch"){
                                        echo "<div class='alert alert-danger d-flex align-items-center alert-dismissible fade show' role='alert'>
                                                <svg class='bi flex-shrink-0 me-2' width='24' height='24' role='img' aria-label='Danger:'><use xlink:href='#exclamation-triangle-fill'/></svg>
                                                <div>
                                                    Password not Match.
                                                </div>
                                                <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
                                                </div>";
                                        }       
                                        else if ($_GET["error"] == "passwordmustcontain"){
                                        echo "<div class='alert alert-danger d-flex align-items-center alert-dismissible fade show' role='alert'>
                                                <svg class='bi flex-shrink-0 me-2' width='24' height='24' role='img' aria-label='Danger:'><use xlink:href='#exclamation-triangle-fill'/></svg>
                                                <div>
                                                    Password must contain at least one special character, one number, and one uppercase letter.
                                                </div>
                                                <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
                                                </div>";
                                        }
                                        else if ($_GET["error"] == "wrongcaptcha"){
                                        echo "<div class='alert alert-danger d-flex align-items-center alert-dismissible fade show' role='alert'>
                                                <svg class='bi flex-shrink-0 me-2' width='24' height='24' role='img' aria-label='Danger:'><use xlink:href='#exclamation-triangle-fill'/></svg>
                                                <div>
                                                    Wrong Captcha
                                                </div>
                                                <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
                                                </div>";
                                        } 
                                        else if ($_GET["error"] == "stmterror"){
                                        echo "<div class='alert alert-danger d-flex align-items-center alert-dismissible fade show' role='alert'>
                                                <svg class='bi flex-shrink-0 me-2' width='24' height='24' role='img' aria-label='Danger:'><use xlink:href='#exclamation-triangle-fill'/></svg>
                                                <div>
                                                    Something Went Wrong.
                                                </div>
                                                <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
                                                </div>";
                                        }
                                        else if ($_GET["error"] == "none"){
                                        echo "<script>alert('Your Username is $username')</script>";
                                        } 
                                    }
                                ?>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/jquery-3.6.0.min.js"></script>
    <script src="assets/js/function.js"></script>
    <script>
        $(document).ready(function() {
            $('.name').on('keyup blur',function(){ 
                var node = $(this);
                node.val(node.val().replace(/[^A-Za-z\s]/g,'') ); }
            );
            var originalBarangayOptions = $("#barangay").html();
            $("#admin-type").change(function() {
                if ($(this).val() == "Main Administrator") {
                    $("#barangay").val("City Hall");
                    $("#barangay option[value!='City Hall']").remove();
                } else {
                    $("#barangay").html(originalBarangayOptions);
                }
            });
        });
    </script>
</body>

</html>