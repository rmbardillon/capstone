<?php 
    include("header.html");
    if (!isset($_SESSION['admin-data']['username'])) {
        header("location: ../login/admin.html");
        exit();
    }
?>
    <div class="container" style="width: 30%;">
        <h3 class="text-dark mb-4">Change Password</h3>
        <form action="includes/change-password.inc.php" method="POST">
            <input class="form-control mb-3" type="password" id="old_password" name="old_password" placeholder="Input your old password" required>
            <input class="form-control mb-3" type="password" id="new_password" name="new_password" placeholder="Input your new password" required>
            <input class="form-control mb-3" type="password" id="confirm_new_password" name="confirm_new_password" placeholder="Repeat your new password" required>
            <div id="error-message" class='text-danger'>
                <?php
                    if (isset($_GET['error'])) {
                        if ($_GET['error'] == "wrongpassword") {
                            echo "<p class='text-danger'>Wrong password!</p>";
                        } else if ($_GET['error'] == "passwordcheck") {
                            echo "<p class='text-danger'>Passwords do not match!</p>";
                        } else if ($_GET['error'] == "oldnewpasswordsame") {
                            echo "<p class='text-danger'>Cannot use old password!</p>";
                        }
                    } else if (isset($_GET['success'])) {
                        echo "<p class='text-success'>Password changed successfully!</p>";
                    }
                ?>
            </div>
            <input class="btn btn-primary w-100" type="submit" value="Change Password" name="change-password">
        </form>
    </div>
<?php
    include "footer.html";
?>